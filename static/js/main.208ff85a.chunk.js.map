{"version":3,"sources":["resources/shaders/HoverImageShader.js","index.js"],"names":["HoverImageShader","vertexShader","fragmentShader","uniforms","texture","type","value","imageAspectRatio","aspectRatio","opacity","hover","image","Image","_ref","url","props","Object","objectWithoutProperties","_excluded","_useMemo","useMemo","TextureLoader","load","slicedToArray","react_default","a","createElement","three","mesh","attach","args","shaderMaterial","transparent","uniforms-texture-value","App","_useSpring","useSpring","pos","scale","rotation","config","mass","tension","friction","precision","_useSpring2","set","className","onMouseMove","_ref2","clientX","clientY","x","window","innerWidth","y","innerHeight","Math","PI","dist","pixelRatio","devicePixelRatio","style","background","camera","fov","position","assign","render","document","getElementById"],"mappings":"2NAIIA,EAAmB,CACrBC,aAAY,6JASZC,eAAc,43CAkDdC,SAAU,CACRC,QAAS,CACPC,KAAM,IACNC,MAAO,IAETC,iBAAkB,CAChBF,KAAM,IACNC,MAAO,GAETE,YAAa,CACXH,KAAM,IACNC,MAAO,GAETG,QAAS,CACPJ,KAAM,IACNC,MAAO,GAETI,MAAO,CACLL,KAAM,IACNC,MAAO,uBC3EPK,EAAQ,6DAEd,SAASC,EAATC,GAAkC,IAAjBC,EAAiBD,EAAjBC,IAAQC,EAASC,OAAAC,EAAA,EAAAD,CAAAH,EAAAK,GAChCC,EAAkBC,kBAAQ,WAExB,MAAO,EADQ,IAAIC,iBACJC,KAAKR,KACnB,CAACA,IAHGV,EAAPY,OAAAO,EAAA,EAAAP,CAAAG,EAAA,MAKA,OACEK,EAAAC,EAAAC,cAACC,EAAA,EAASC,KAASb,EACjBS,EAAAC,EAAAC,cAAA,uBAAqBG,OAAO,WAAWC,KAAM,CAAC,EAAG,KACjDN,EAAAC,EAAAC,cAACC,EAAA,EAASI,eAAV,CAAyBF,OAAO,WAAWG,aAAW,EAACF,KAAM,CAAC9B,GAAmBiC,yBAAwB7B,KAK/G,SAAS8B,IACP,IAAAC,EAAqBC,YAAU,iBAAO,CACpCC,IAAK,CAAC,EAAG,EAAG,GACZC,MAAO,CAAC,EAAG,EAAG,GACdC,SAAU,CAAC,EAAG,EAAG,GACjBC,OAAQ,CAAEC,KAAM,GAAIC,QAAS,IAAMC,SAAU,IAAKC,UAAW,SAJ/DC,EAAA7B,OAAAO,EAAA,EAAAP,CAAAmB,EAAA,GAAOpB,EAAP8B,EAAA,GAAcC,EAAdD,EAAA,GAOA,OACErB,EAAAC,EAAAC,cAAA,OACEqB,UAAU,OACVC,YAAa,SAAAC,GAA0B,IAAvBC,EAAuBD,EAAvBC,QAASC,EAAcF,EAAdE,QACjBC,EAAKF,EAAUG,OAAOC,WAAc,EAAI,EACxCC,GAAMJ,EAAUE,OAAOG,YAAe,EAAI,EAEhDV,EAAI,CACFT,IAAK,CAACe,EAAG,EAAG,GACZd,MAAO,CAAC,EAAQ,GAAJiB,EAAS,EAAQ,GAAJA,EAAS,GAClChB,SAAU,EAAEgB,GAAKE,KAAKC,GAAK,GAAK,GAAKN,GAAKK,KAAKC,GAAK,GAAK,GAAK,OAGlElC,EAAAC,EAAAC,cAACiC,EAAA,EAAD,CAAQC,WAAYP,OAAOQ,kBAAoB,EAAGC,MAAO,CAAEC,WAAY,WAAaC,OAAQ,CAAEC,IAAK,GAAIC,SAAU,CAAC,EAAG,EAAG,MACtH1C,EAAAC,EAAAC,cAACd,EAADI,OAAAmD,OAAA,CAAOrD,IAAKH,GAAWI,MAM/BqD,iBAAO5C,EAAAC,EAAAC,cAACQ,EAAD,MAASmC,SAASC,eAAe","file":"static/js/main.208ff85a.chunk.js","sourcesContent":["/**\n * @author TheFrost / https://codepen.io/frost084/full/OKZNRm\n */\n\nvar HoverImageShader = {\n  vertexShader: `\n    varying vec2 vUv; \n\n    void main() {\n      vUv = uv;\n\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  `,\n  fragmentShader: `\n    precision highp float; \n\n    uniform sampler2D texture;\n    uniform float imageAspectRatio;\n    uniform float aspectRatio;\n    uniform float opacity;\n    uniform float hover;\n    varying vec2 vUv;\n\n    float exponentialInOut(float t) {\n      return t == 0.0 || t == 1.0 \n        ? t \n        : t < 0.5\n          ? +0.5 * pow(2.0, (20.0 * t) - 10.0)\n          : -0.5 * pow(2.0, 10.0 - (t * 20.0)) + 1.0;\n    } \n\n    void main() {\n      vec2 uv = vUv;\n\n      // fix aspectRatio\n      float u = imageAspectRatio/aspectRatio;\n      if(imageAspectRatio > aspectRatio) {\n        u = 1. / u;\n      }\n\n      uv.y *= u;\n      uv.y -= (u)/2.-.5;\n\n      // hover effect\n      float zoomLevel = .2;\n      float hoverLevel = exponentialInOut(min(1., (distance(vec2(.5), uv) * hover) + hover));\n      uv *= 1. - zoomLevel * hoverLevel;\n      uv += zoomLevel / 2. * hoverLevel;\n      uv = clamp(uv, 0., 1.);\n      vec4 color = texture2D(texture, uv);\n      if(hoverLevel > 0.) {\n        hoverLevel = 1.-abs(hoverLevel-.5)*2.;\n        //Pixel displace\n        uv.y += color.r * hoverLevel * .05;\n        color = texture2D(texture, uv);\n        // RGBshift\n        color.r = texture2D(texture, uv+(hoverLevel)*0.01).r;\n        color.g = texture2D(texture, uv-(hoverLevel)*0.01).g;\n      }\n\n      gl_FragColor = mix(vec4(1.,1.,1.,opacity), color, opacity);\n    }\n  `,\n  uniforms: {\n    texture: {\n      type: 't',\n      value: ''\n    },\n    imageAspectRatio: {\n      type: 'f',\n      value: 1.0\n    },\n    aspectRatio: {\n      type: 'f',\n      value: 1.0\n    },\n    opacity: {\n      type: 'f',\n      value: 1.0\n    },\n    hover: {\n      type: 'f',\n      value: 0.0\n    }\n  }\n}\n\nexport { HoverImageShader }\n","import { render } from 'react-dom'\nimport { TextureLoader } from 'three'\nimport { useSpring, animated } from 'react-spring/three'\nimport React, { useMemo } from 'react'\nimport { Canvas } from 'react-three-fiber'\nimport { HoverImageShader } from './resources/index'\nimport './styles.css'\n\nconst image = './resizedIMG_7947-gigapixel-compressed-scale-2_00x (1).jpg'\n\nfunction Image({ url, ...props }) {\n  const [texture] = useMemo(() => {\n    const loader = new TextureLoader()\n    return [loader.load(url)]\n  }, [url])\n\n  return (\n    <animated.mesh {...props}>\n      <planeBufferGeometry attach=\"geometry\" args={[5, 7]} />\n      <animated.shaderMaterial attach=\"material\" transparent args={[HoverImageShader]} uniforms-texture-value={texture} />\n    </animated.mesh>\n  )\n}\n\nfunction App() {\n  const [props, set] = useSpring(() => ({\n    pos: [0, 0, 0],\n    scale: [1, 1, 1],\n    rotation: [0, 0, 0],\n    config: { mass: 10, tension: 1000, friction: 300, precision: 0.00001 }\n  }))\n\n  return (\n    <div\n      className=\"main\"\n      onMouseMove={({ clientX, clientY }) => {\n        const x = (clientX / window.innerWidth) * 2 - 1\n        const y = -(clientY / window.innerHeight) * 2 + 1\n\n        set({\n          pos: [x, 0, 0],\n          scale: [1 - y * 0.1, 1 - y * 0.1, 1],\n          rotation: [-y * (Math.PI / 3) * 0.3, x * (Math.PI / 3) * 0.3, 0]\n        })\n      }}>\n      <Canvas pixelRatio={window.devicePixelRatio || 1} style={{ background: '#272727' }} camera={{ fov: 32, position: [0, 0, 11] }}>\n        <Image url={image} {...props} />\n      </Canvas>\n    </div>\n  )\n}\n\nrender(<App />, document.getElementById('root'))\n"],"sourceRoot":""}